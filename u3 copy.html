<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Metamorfosis de Scrooge: Un Análisis Actancial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #111;
            color: #fff;
            overflow: hidden;
        }
        .font-serif-display { font-family: 'EB Garamond', serif; }

        /* Estilos generales de diapositiva */
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.8s ease-in-out, visibility 0.8s;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-direction: column;
            padding: 2rem;
        }
        .slide.active {
            opacity: 1;
            visibility: visible;
        }
        .victorian-paper {
             background-color: #2a2a2a;
             background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23383838' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .dark-blue-paper {
             background-color: #0a192f;
             background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%231e293b' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
        }

        /* Animación de nieve */
        .snow { position: absolute; top: -100px; left: 0; right: 0; bottom: 0; pointer-events: none; }
        .flake { position: absolute; background: white; border-radius: 50%; opacity: 0.6; }
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.6; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* Animación de escritura */
        .typewriter h1 {
            overflow: hidden;
            border-right: .15em solid #daa520;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .15em;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: #daa520; } }

        /* Controles de navegación */
        .nav-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 1000;
        }
        .nav-controls button {
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .nav-controls button:hover { background-color: rgba(255, 255, 255, 0.4); }
        .slide-counter {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background-color: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            z-index: 1000;
        }
        
        /* Estilos específicos de diapositivas */
        .golden-text { color: #daa520; text-shadow: 0 0 15px rgba(218, 165, 32, 0.5); }
        .soft-glow { animation: soft-glow-anim 2.5s ease-in-out infinite alternate; }
        @keyframes soft-glow-anim {
            from { text-shadow: 0 0 10px rgba(218, 165, 32, 0.4); }
            to { text-shadow: 0 0 25px rgba(218, 165, 32, 0.8); }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .library-bg {
            background-image: url('https://png.pngtree.com/background/20230522/original/pngtree-room-filled-with-books-on-a-ladder-picture-image_2693148.jpg');
            background-size: cover;
            background-position: center;
        }
        .library-bg::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(43, 29, 14, 0.7);
            filter: blur(5px);
        }
        .library-content { position: relative; z-index: 1; }
        
        .lower-third {
            position: absolute;
            bottom: 10%;
            left: 5%;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-left: 4px solid #daa520;
        }

        .pop-in { animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; }
        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .draw-line {
            width: 0;
            height: 1px;
            background-color: #daa520;
            margin: 1rem auto;
            animation: draw 0.6s ease-out forwards;
        }
        @keyframes draw { to { width: 50%; } }

        /* Modelo Actancial */
        .actancial-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 4rem 2rem;
            width: 80%;
            max-width: 900px;
            position: relative;
        }
        .actancial-node {
            border: 1px solid rgba(255, 255, 255, 0.5);
            padding: 1.5rem;
            border-radius: 8px;
            transition: all 0.5s ease;
            background-color: rgba(255, 255, 255, 0.05);
        }
        .node-title { font-size: 0.9em; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.7; }

        /* Flechas SVG para el modelo */
        .arrow-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .arrow-path {
            stroke: #daa520;
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw-arrow 0.7s ease-out forwards;
        }
        @keyframes draw-arrow { to { stroke-dashoffset: 0; } }
        
    </style>
</head>
<body>

    <div id="presentation-container">

        <!-- Diapositiva 1: Título animado (00:00–00:15) -->
        <div class="slide active victorian-paper" id="slide-1" data-sfx="page-flip">
            <div class="snow"></div>
            <div class="w-full max-w-4xl typewriter">
                <h1 class="text-4xl md:text-6xl font-serif-display golden-text soft-glow">La Metamorfosis de Scrooge</h1>
            </div>
             <h2 class="text-2xl md:text-3xl font-serif-display golden-text soft-glow mt-2">Un Análisis Actancial</h2>
            <p class="text-xl md:text-2xl mt-8 tracking-[0.2em] opacity-80 fade-in-up" style="animation-delay: 3.6s;">Karolina · Diana · Luis</p>
        </div>

        <!-- Diapositiva 2: Fondo para cámara Karolina (00:15–00:30) -->
        <div class="slide library-bg" id="slide-2">
            <div class="library-content w-full h-full flex justify-between items-center">
                 <div class="w-1/2 p-8 text-left">
                     <!-- Espacio para el presentador -->
                 </div>
                 <div class="w-1/2 p-8">
                     <!-- Zona segura para la portada del libro -->
                 </div>
                 <div class="lower-third fade-in-up">
                     <h3 class="text-2xl font-bold">Karolina</h3>
                     <p class="text-lg">Introducción</p>
                 </div>
            </div>
        </div>

        <!-- Diapositiva 3: Portada del libro (00:30–00:45) -->
        <div class="slide library-bg" id="slide-3" data-sfx="ding">
             <div class="library-content w-full h-full flex justify-between items-center">
                 <div class="w-1/2 p-8 text-left">
                     <!-- Espacio para el presentador -->
                 </div>
                 <div class="w-1/2 flex flex-col items-center justify-center">
                    <div class="pop-in">
                        <img src="https://images.cdn2.buscalibre.com/fit-in/360x360/b1/ab/b1ab497aee35e343e96f78880342a082.jpg" alt="Portada de A Christmas Carol" class="rounded-lg shadow-2xl" style="filter: sepia(0.3) contrast(1.1);">
                        <p class="mt-4 text-center text-gray-300">Charles Dickens — 1843</p>
                    </div>
                 </div>
            </div>
        </div>

        <!-- Diapositiva 4: Cartela ‘GREIMAS’ (00:45–01:10) -->
        <div class="slide dark-blue-paper" id="slide-4" data-sfx="pen-stroke">
            <div class="w-full max-w-2xl fade-in-up">
                <h2 class="text-7xl font-serif-display tracking-[0.3em] golden-text">GREIMAS</h2>
                <div class="draw-line"></div>
                <h3 class="text-3xl tracking-[0.1em] text-gray-300">Modelo actancial</h3>
            </div>
        </div>

        <!-- Diapositiva 5: Infografía base del Modelo Actancial (01:10–01:30) -->
        <div class="slide dark-blue-paper" id="slide-5">
            <div class="actancial-grid">
                <div class="actancial-node fade-in-up" style="animation-delay: 0.2s; grid-column: 1; grid-row: 1;"><span class="node-title">Destinador</span></div>
                <div class="actancial-node fade-in-up" style="animation-delay: 0.4s; grid-column: 2; grid-row: 1;"><span class="node-title">Objeto</span></div>
                <div class="actancial-node fade-in-up" style="animation-delay: 0.6s; grid-column: 3; grid-row: 1;"><span class="node-title">Destinatario</span></div>
                <div class="actancial-node fade-in-up" style="animation-delay: 0.8s; grid-column: 1; grid-row: 2;"><span class="node-title">Ayudantes</span></div>
                <div class="actancial-node fade-in-up" style="animation-delay: 1.0s; grid-column: 2; grid-row: 2;"><span class="node-title">Sujeto</span></div>
                <div class="actancial-node fade-in-up" style="animation-delay: 1.2s; grid-column: 3; grid-row: 2;"><span class="node-title">Oponentes</span></div>
            </div>
        </div>
        
        <!-- Diapositivas 6, 7, 8: Ejes del Modelo -->
        <div class="slide dark-blue-paper" id="slide-6" data-sfx="whoosh">
            <div class="actancial-grid">
                <div class="actancial-node opacity-30"><span class="node-title">Destinador</span></div>
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Objeto</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Destinatario</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Ayudantes</span></div>
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Sujeto</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Oponentes</span></div>
                <svg class="arrow-svg" viewBox="0 0 900 400"><path class="arrow-path" d="M450 325 L 450 125" marker-end="url(#arrowhead)"></path></svg>
                 <p class="absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 bg-[#0a192f] px-2 text-yellow-400">Eje del Deseo</p>
            </div>
        </div>
        
        <div class="slide dark-blue-paper" id="slide-7" data-sfx="tick-tick">
            <div class="actancial-grid">
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Destinador</span></div>
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Objeto</span></div>
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Destinatario</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Ayudantes</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Sujeto</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Oponentes</span></div>
                <svg class="arrow-svg" viewBox="0 0 900 400"><path class="arrow-path" d="M150 125 L 750 125" marker-end="url(#arrowhead)"></path></svg>
                <p class="absolute top-[28%] left-1/2 -translate-x-1/2 bg-[#0a192f] px-2 text-yellow-400">Eje de la Comunicación</p>
            </div>
        </div>

        <div class="slide dark-blue-paper" id="slide-8" data-sfx="whoosh-double">
             <div class="actancial-grid">
                <div class="actancial-node opacity-30"><span class="node-title">Destinador</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Objeto</span></div>
                <div class="actancial-node opacity-30"><span class="node-title">Destinatario</span></div>
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Ayudantes [+]</span></div>
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Sujeto</span></div>
                <div class="actancial-node border-yellow-400 shadow-lg shadow-yellow-500/20"><span class="node-title">Oponentes [-]</span></div>
                <svg class="arrow-svg" viewBox="0 0 900 400">
                    <path class="arrow-path" style="animation-delay: 0s" d="M150 325 L 400 325" marker-end="url(#arrowhead)"></path>
                    <path class="arrow-path" style="animation-delay: 0.1s" d="M750 325 L 500 325" marker-end="url(#arrowhead)"></path>
                </svg>
                <p class="absolute bottom-[28%] left-1/2 -translate-x-1/2 bg-[#0a192f] px-2 text-yellow-400">Eje del Poder</p>
            </div>
        </div>

        <!-- Diapositiva 9: Actancial de Scrooge 1.0 (03:30–04:15) -->
        <div class="slide dark-blue-paper" id="slide-9">
             <div class="grid grid-cols-2 gap-8 w-full h-full items-center">
                 <div class="text-left p-8">
                    <!-- Espacio para presentadora -->
                    <h2 class="text-4xl font-serif-display golden-text">Scrooge 1.0</h2>
                    <p class="mt-4 text-lg text-gray-300">El estado inicial del personaje, donde su programa narrativo se centra en la acumulación material y el aislamiento.</p>
                 </div>
                 <div class="p-4 scale-90">
                    <div class="actancial-grid text-sm">
                        <div class="actancial-node"><span class="node-title">Destinador</span><p>Avaricia / Capitalismo</p></div>
                        <div class="actancial-node"><span class="node-title">Objeto</span><p>💰 Dinero / Acumulación</p></div>
                        <div class="actancial-node"><span class="node-title">Destinatario</span><p>Scrooge (Beneficio material)</p></div>
                        <div class="actancial-node"><span class="node-title">Ayudantes</span><p>📖 Libros, 🔒 Cerrojos</p></div>
                        <div class="actancial-node"><span class="node-title">Sujeto</span><p>Ebenezer Scrooge</p></div>
                        <div class="actancial-node border-red-500/50"><span class="node-title">Oponentes</span><p>🎄 Navidad, 👨‍👩‍👧‍👦 Sobrino Fred</p></div>
                    </div>
                 </div>
             </div>
        </div>

        <!-- Diapositiva 10: Transición a Transformación (04:15–04:30) -->
        <div class="slide victorian-paper" id="slide-10" data-sfx="bell-toll">
             <div class="text-6xl">🕰️</div>
             <p class="mt-4 text-xl">Una visita cambiará el curso del tiempo...</p>
        </div>
        
        <!-- Diapositiva 11: Recurso de Marley (04:30–04:50) -->
        <div class="slide dark-blue-paper" id="slide-11">
             <div class="border-4 border-gray-600 p-2 rounded-sm shadow-2xl bg-black relative pop-in">
                 <svg width="400" height="300" viewBox="0 0 100 75" class="opacity-70">
                    <!-- Ilustración de un espectro -->
                    <path d="M 50 10 C 30 10, 20 30, 20 50 C 20 70, 30 90, 50 90 C 70 90, 80 70, 80 50 C 80 30, 70 10, 50 10 Z" fill="rgba(180, 200, 220, 0.5)"></path>
                    <circle cx="40" cy="35" r="3" fill="black"></circle>
                    <circle cx="60" cy="35" r="3" fill="black"></circle>
                    <path d="M 40 50 Q 50 60, 60 50" stroke="black" fill="none"></path>
                 </svg>
                 <div class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 px-4 py-1">
                    <p class="text-xl golden-text font-serif-display">Marley — Destinador</p>
                 </div>
             </div>
        </div>

        <!-- Diapositiva 12: Actancial de Scrooge 2.0 (04:50–05:40) -->
        <div class="slide dark-blue-paper" id="slide-12" data-sfx="shimmer">
             <h2 class="text-4xl font-serif-display golden-text mb-8 absolute top-16">Scrooge 2.0: Un Nuevo Programa Narrativo</h2>
             <div class="actancial-grid text-sm fade-in-up">
                <div class="actancial-node"><span class="node-title">Destinador</span><p>👻 Marley + Espíritus</p></div>
                <div class="actancial-node border-green-400 shadow-lg shadow-green-500/20"><span class="node-title">Objeto</span><p>❤️ Redención / Conexión Humana</p></div>
                <div class="actancial-node"><span class="node-title">Destinatario</span><p>Scrooge y la Sociedad</p></div>
                <div class="actancial-node"><span class="node-title">Ayudantes</span><p>🕊️ Espíritus, 🦯 Tiny Tim</p></div>
                <div class="actancial-node"><span class="node-title">Sujeto</span><p>Ebenezer Scrooge (renovado)</p></div>
                <div class="actancial-node"><span class="node-title">Oponente</span><p>👤 Avaricia / Viejo Scrooge</p></div>
             </div>
        </div>

        <!-- Diapositiva 13: Resumen visual (05:40–06:20) -->
        <div class="slide dark-blue-paper" id="slide-13" data-sfx="tick">
            <div class="grid grid-cols-2 gap-4 w-full h-full items-center p-8">
                <div class="p-2 border-r-2 border-gray-700">
                    <h3 class="text-2xl font-serif-display golden-text mb-4">ANTES: Scrooge 1.0</h3>
                    <ul class="text-left space-y-2 list-disc list-inside text-gray-400">
                        <li><strong class="text-white">Objeto:</strong> 💰 Dinero</li>
                        <li><strong class="text-white">Ayudantes:</strong> 📖 Aislamiento</li>
                        <li><strong class="text-white">Oponente:</strong> 🎄 Humanidad</li>
                    </ul>
                </div>
                <div class="p-2">
                    <h3 class="text-2xl font-serif-display golden-text mb-4">DESPUÉS: Scrooge 2.0</h3>
                    <ul class="text-left space-y-2 list-disc list-inside">
                        <li class="text-green-400">✔️ <strong class="text-white">Objeto:</strong> ❤️ Redención</li>
                        <li class="text-green-400">✔️ <strong class="text-white">Ayudantes:</strong> 👻 Guías</li>
                        <li class="text-green-400">✔️ <strong class="text-white">Oponente:</strong> 👤 Su propio egoísmo</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Diapositiva 14: Conclusión (06:20–06:45) -->
        <div class="slide dark-blue-paper" id="slide-14">
             <p class="w-full max-w-4xl text-3xl md:text-4xl leading-relaxed font-serif-display text-gray-300 fade-in-up">
                 “Transformar al personaje es transformar su
                 <span class="golden-text soft-glow">deseo</span> en la 
                 <span class="golden-text soft-glow">estructura</span>
                 del relato.”
             </p>
             <p class="mt-4 text-lg text-gray-500">(según Greimas)</p>
        </div>

        <!-- Diapositiva 15: Créditos finales (06:45–07:00) -->
        <div class="slide victorian-paper" id="slide-15" data-sfx="final-bell">
             <div class="snow"></div>
             <div class="fade-in-up">
                <h2 class="text-4xl font-serif-display golden-text">Créditos</h2>
                <p class="text-2xl mt-8">Karolina · Diana · Luis</p>
                <p class="mt-2 text-gray-400">[Nombre del Curso], [Año]</p>
                <div class="w-1/3 h-px bg-gray-600 my-8 mx-auto"></div>
                <h3 class="text-xl font-bold text-gray-300">Referencias</h3>
                <p class="text-sm mt-2 text-gray-400 max-w-lg mx-auto">
                    Dickens, C. (1843). *A Christmas Carol*. <br>
                    Fuentes académicas sobre el modelo actancial de A. J. Greimas.
                </p>
             </div>
        </div>
        
    </div>

    <!-- Controles y contador de diapositivas -->
    <div class="nav-controls">
        <button id="prevBtn">← Anterior</button>
        <button id="nextBtn">Siguiente →</button>
    </div>
    <div id="slide-counter" class="slide-counter">1 / 15</div>

    <svg width="0" height="0" style="position:absolute">
        <defs>
            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#daa520" />
            </marker>
        </defs>
    </svg>
    

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const slideCounter = document.getElementById('slide-counter');
            let currentSlide = 0;

            // Inicialización de la nieve en diapositivas con ella
            document.querySelectorAll('.snow').forEach(container => {
                for (let i = 0; i < 50; i++) {
                    const flake = document.createElement('div');
                    flake.className = 'flake';
                    const size = Math.random() * 4 + 1;
                    flake.style.width = `${size}px`;
                    flake.style.height = `${size}px`;
                    flake.style.left = `${Math.random() * 100}%`;
                    flake.style.animation = `fall ${Math.random() * 10 + 10}s linear infinite`;
                    flake.style.animationDelay = `${Math.random() * 5}s`;
                    container.appendChild(flake);
                }
            });
            
            // Sintetizadores de audio con Tone.js
            const sounds = {
                'page-flip': new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0 } }).toDestination(),
                'ding': new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.005, decay: 0.2, sustain: 0.1, release: 0.5 } }).toDestination(),
                'pen-stroke': new Tone.NoiseSynth({ noise: { type: 'pink' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0 } }).toDestination(),
                'whoosh': new Tone.NoiseSynth({ noise: { type: 'white' }, filter: { type: 'lowpass', frequency: 5000 }, envelope: { attack: 0.01, decay: 0.3, sustain: 0 } }).toDestination(),
                'tick': new Tone.MembraneSynth({ pitchDecay: 0.01, octaves: 2, envelope: { attack: 0.001, decay: 0.2, sustain: 0 } }).toDestination(),
                'bell-toll': new Tone.MetalSynth({ frequency: 120, envelope: { attack: 0.01, decay: 1.5, release: 0.5 }, harmonicity: 5.1, modulationIndex: 32, resonance: 4000, octaves: 1.5 }).toDestination(),
                'shimmer': new Tone.Synth({ oscillator: { type: 'fmtriangle', harmonicity: 0.5 }, envelope: { attack: 0.2, decay: 0.5, sustain: 0.3, release: 1 } }).toDestination(),
                'final-bell': new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 1, sustain: 0.2, release: 1 } }).toDestination(),
            };

            function playSound(sfx) {
                if (!sfx || !sounds[sfx]) return;
                 if (Tone.context.state !== 'running') {
                    Tone.start();
                }
                switch (sfx) {
                    case 'page-flip': sounds[sfx].triggerAttack(); break;
                    case 'ding': sounds[sfx].triggerAttackRelease("C6", "8n"); break;
                    case 'pen-stroke': sounds[sfx].triggerAttack(); break;
                    case 'whoosh': sounds[sfx].triggerAttack(); break;
                    case 'tick': sounds[sfx].triggerAttackRelease("C4", "16n"); break;
                    case 'tick-tick':
                        sounds['tick'].triggerAttackRelease("C5", "16n", Tone.now());
                        sounds['tick'].triggerAttackRelease("G5", "16n", Tone.now() + 0.2);
                        break;
                    case 'whoosh-double':
                        sounds['whoosh'].triggerAttack(Tone.now());
                        sounds['whoosh'].triggerAttack(Tone.now() + 0.1);
                        break;
                    case 'bell-toll': sounds[sfx].triggerAttackRelease("C3", "2n"); break;
                    case 'shimmer': sounds[sfx].triggerAttackRelease("C5", "1n"); break;
                    case 'final-bell': sounds[sfx].triggerAttackRelease("G5", "1n"); break;
                }
            }


            function showSlide(index) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });
                currentSlide = index;
                slideCounter.textContent = `${index + 1} / ${slides.length}`;
                
                // Disparar SFX al cambiar de diapositiva
                const activeSlide = slides[index];
                const sfx = activeSlide.dataset.sfx;
                if(sfx) {
                   playSound(sfx);
                }
            }

            function nextSlide() {
                let next = currentSlide + 1;
                if (next >= slides.length) {
                    next = 0; // Vuelve al inicio
                }
                showSlide(next);
            }

            function prevSlide() {
                let prev = currentSlide - 1;
                if (prev < 0) {
                    prev = slides.length - 1; // Va al final
                }
                showSlide(prev);
            }

            // Event Listeners
            prevBtn.addEventListener('click', prevSlide);
            nextBtn.addEventListener('click', nextSlide);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' || e.key === ' ') {
                    nextSlide();
                } else if (e.key === 'ArrowLeft') {
                    prevSlide();
                }
            });

            // Iniciar en la primera diapositiva
            showSlide(0);
        });
    </script>
</body>
</html>
